
<script>

	$(document).ready(function(){

		//Render add partner form
		$('#addPartnerButton').click(function(){
			//use partners form to add a new partner
			$('#partners').append('<%= escape_javascript( render(:partial=>"partners/form")).html_safe %>');
			$('#addPartnerButton').hide();
		});

		//Cancel add partner form
		$('body').on('click', '#cancelPartnerForm', function(event){
			$('#addPartnerForm').remove();
			$('#addPartnerButton').show();
		});

		//Render add review form
		$('#addReviewButton').click(function(){
			$('#reviews').append('<%= escape_javascript( render(:partial=>"reviews/form")).html_safe %>');
			$('#addReviewButton').hide();
		});

		//Cancel review form
		$('body').on('click', '#cancelReviewForm', function(event){
			$('#addReviewForm').remove();
			$('#addReviewButton').show();
		});

	});



</script>

<div id="navigation">
	<%= link_to '< Back to Results', root_url %>
</div>
<div id="companyinfo">
	<h2 style ="text-align:center"><a href ="<%=@company.url %>" target = "_blank"><%= @company.name %></a></h2>
	<p><%= @company.description %></p>

</div>


<div class="partners" >
	<h3>Partners</h3>
	<input class="customButton" id = "addPartnerButton" type="button" value="Add Partner" style= "float:center">
	<br/>
	<%= render "partners/partners" %>


	<div id="addPartnerForm" style="display: none;">
		<h2>Add a Partner </h2>

		<%= form_for [@company, @company.partners.build] do |f| %>
		  <% if @partner.errors.any? %>
		    <div id="error_explanation">
		      <h2><%= pluralize(@partner.errors.count, "error") %> prohibited this partner from being saved:</h2>

		      <ul>
		      <% @partner.errors.full_messages.each do |msg| %>
		        <li><%= msg %></li>
		      <% end %>
		      </ul>
		    </div>
		  <% end %>

		  <div class="field">
		    <%= f.label :name %><br />
		    <%= f.text_field :name %>
		  </div>
		  <div class="actions">
		    <%= f.submit %>
		  </div>
		<% end %>
		<input type="button" class = "customButton"id="cancelPartnerForm" value="Cancel">

	</div>

</div>

<div id="reviews">
	 <h3 style = "margin-left:100px">Reviews</h3>
	 <input class ="customButton" id = "addReviewButton" type="button" value="New Review" style = "margin-left:100px">
	<%= render "reviews/reviews" %></div>
	
</div>

